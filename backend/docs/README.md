# J's Money Backend ë¬¸ì„œ

ê°œì¸ ìì‚°ê´€ë¦¬ í”Œë«í¼ J's Moneyì˜ ë°±ì—”ë“œ ê¸°ìˆ  ë¬¸ì„œì…ë‹ˆë‹¤.

## ğŸ“š ë¬¸ì„œ ëª©ë¡

### í•µì‹¬ ë¬¸ì„œ

#### 1. [Database Schema Overview](./database-schema.md)
- **ì„¤ëª…**: ì „ì²´ ë°ì´í„°ë² ì´ìŠ¤ ì•„í‚¤í…ì²˜ ê°œìš”
- **ëŒ€ìƒ**: ì‹ ê·œ ê°œë°œì, ì•„í‚¤í…íŠ¸
- **ë‚´ìš©**: 
  - í•µì‹¬ ì„¤ê³„ ì›ì¹™
  - í…Œì´ë¸” ê´€ê³„ë„
  - ì£¼ìš” Enum íƒ€ì…
  - ë³´ì¡° ì‹œìŠ¤í…œ ì†Œê°œ

#### 2. [PostgreSQL Schema](./postgresql-schema.md)
- **ì„¤ëª…**: PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ìƒì„¸ ìŠ¤í‚¤ë§ˆ
- **ëŒ€ìƒ**: ë°±ì—”ë“œ ê°œë°œì, DBA
- **ë‚´ìš©**:
  - ëª¨ë“  í…Œì´ë¸” DDL ì •ì˜
  - ì¸ë±ìŠ¤ ë° ì œì•½ì¡°ê±´
  - ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™
  - ì¿¼ë¦¬ íŒ¨í„´ ë° ìµœì í™”
- **í…Œì´ë¸”**: users, accounts, account_shares, assets, transactions, tags, taggables, reminders, activities, categories, category_auto_rules

#### 3. [Redis Schema](./redis-schema.md)
- **ì„¤ëª…**: Redis ë°ì´í„° êµ¬ì¡° ë° ìºì‹± ì „ëµ
- **ëŒ€ìƒ**: ë°±ì—”ë“œ ê°œë°œì
- **ë‚´ìš©**:
  - ì‹¤ì‹œê°„ ìì‚° ì”ê³  ê´€ë¦¬
  - ìˆ˜ìµ ê³„ì‚° í (FIFO/LIFO/AVG)
  - ì‹œì„¸ ìºì‹œ
  - TTL ë° ë¬´íš¨í™” ì „ëµ

#### 4. [API Guide](./api-guide.md)
- **ì„¤ëª…**: RESTful API ì‚¬ìš© ê°€ì´ë“œ
- **ëŒ€ìƒ**: í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì, ì™¸ë¶€ ì—°ë™ ê°œë°œì, AI Agent
- **ë‚´ìš©**:
  - ì¸ì¦ ë°©ë²• (JWT)
  - ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸
  - ìš”ì²­/ì‘ë‹µ ì˜ˆì‹œ
  - ì—ëŸ¬ ì²˜ë¦¬

### í†µí•© ê°€ì´ë“œ

#### 5. [File Upload Integration](./file-upload-integration.md)
- **ì„¤ëª…**: ê¸ˆìœµê¸°ê´€ ê±°ë˜ ë‚´ì—­ íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥
- **ëŒ€ìƒ**: ë°±ì—”ë“œ ê°œë°œì
- **ë‚´ìš©**:
  - ì§€ì› íŒŒì¼ í˜•ì‹ (í† ìŠ¤ë±…í¬, ë¯¸ë˜ì—ì…‹ì¦ê¶Œ, KBì¦ê¶Œ)
  - ìë™ íŒŒì‹± ë° ë³€í™˜
  - ì•”í˜¸í™” íŒŒì¼ ì²˜ë¦¬
  - ì¹´í…Œê³ ë¦¬ ê²€ì¦ ê·œì¹™
  - API ì‚¬ìš© ì˜ˆì‹œ

#### 6. [Redis Integration](./redis-integration.md)
- **ì„¤ëª…**: Redis í†µí•© ê°€ì´ë“œ
- **ëŒ€ìƒ**: ë°±ì—”ë“œ ê°œë°œì
- **ë‚´ìš©**:
  - ìì‚° ì”ê³  ìë™ ì—…ë°ì´íŠ¸
  - Redis ì„¤ì •
  - Docker Compose ì˜ˆì‹œ
  - API ì‘ë‹µì—ì„œ ì”ê³  ì¡°íšŒ

### ìš´ì˜ ê°€ì´ë“œ

#### 7. [Migration Guide](./migration-guide.md)
- **ì„¤ëª…**: ë°°í¬ ë° ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ
- **ëŒ€ìƒ**: DevOps ì—”ì§€ë‹ˆì–´, DBA
- **ë‚´ìš©**:
  - ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­
  - PostgreSQL ì„¤ì •
  - Alembic ë§ˆì´ê·¸ë ˆì´ì…˜
  - ë°±ì—… ë° ë³µêµ¬
  - ë¬¸ì œ í•´ê²°

## ğŸ—‚ï¸ ë¬¸ì„œ êµ¬ì¡°

```
docs/
â”œâ”€â”€ README.md                          # ì´ íŒŒì¼
â”œâ”€â”€ database-schema.md                 # ì „ì²´ DB ì•„í‚¤í…ì²˜ ê°œìš”
â”œâ”€â”€ postgresql-schema.md               # PostgreSQL ìƒì„¸ ìŠ¤í‚¤ë§ˆ â­
â”œâ”€â”€ redis-schema.md                    # Redis ë°ì´í„° êµ¬ì¡°
â”œâ”€â”€ api-guide.md                       # API ì‚¬ìš© ê°€ì´ë“œ
â”œâ”€â”€ file-upload-integration.md         # íŒŒì¼ ì—…ë¡œë“œ í†µí•©
â”œâ”€â”€ redis-integration.md               # Redis í†µí•©
â””â”€â”€ migration-guide.md                 # ë°°í¬ ë° ë§ˆì´ê·¸ë ˆì´ì…˜
```

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### ìƒˆë¡œìš´ ê°œë°œìë¥¼ ìœ„í•œ í•™ìŠµ ìˆœì„œ

1. **[Database Schema Overview](./database-schema.md)** - ì „ì²´ êµ¬ì¡° ì´í•´
2. **[PostgreSQL Schema](./postgresql-schema.md)** - ë°ì´í„° ëª¨ë¸ ìƒì„¸ íŒŒì•…
3. **[API Guide](./api-guide.md)** - API ì‚¬ìš©ë²• ìŠµë“
4. **[Redis Integration](./redis-integration.md)** - ì‹¤ì‹œê°„ ë°ì´í„° ì²˜ë¦¬ ì´í•´

### ê¸°ëŠ¥ë³„ ì°¸ì¡° ë¬¸ì„œ

| ê¸°ëŠ¥ | ì°¸ì¡° ë¬¸ì„œ |
|------|----------|
| ìƒˆë¡œìš´ í…Œì´ë¸” ì¶”ê°€ | [PostgreSQL Schema](./postgresql-schema.md), [Migration Guide](./migration-guide.md) |
| ê±°ë˜ íŒŒì¼ ì—…ë¡œë“œ | [File Upload Integration](./file-upload-integration.md) |
| ì‹¤ì‹œê°„ ì”ê³  ì¡°íšŒ | [Redis Schema](./redis-schema.md), [Redis Integration](./redis-integration.md) |
| API í˜¸ì¶œ | [API Guide](./api-guide.md) |
| ë°°í¬ ë° ì„¤ì • | [Migration Guide](./migration-guide.md) |

## ğŸ“ ì£¼ìš” ê°œë…

### í•µì‹¬ ì„¤ê³„ ì›ì¹™

1. **ìì‚° ì¤‘ì‹¬ ì•„í‚¤í…ì²˜**: ëª¨ë“  ê±°ë˜ëŠ” ìì‚°(`assets`)ì„ ì¤‘ì‹¬ìœ¼ë¡œ ê¸°ë¡
2. **ë³µì‹ë¶€ê¸° ì›ì¹™**: ìì‚° êµí™˜ì€ 2ê°œ ë ˆì½”ë“œë¡œ ì •í™•í•œ ê°ì‚¬ ì¶”ì 
3. **ìˆ˜ëŸ‰ ë³€í™” ì¤‘ì‹¬**: ê±°ë˜ì˜ ë³¸ì§ˆì€ ìì‚° ìˆ˜ëŸ‰ì˜ ì¦ê°
4. **í•˜ì´ë¸Œë¦¬ë“œ ì €ì¥ì†Œ**: PostgreSQL(ê±°ë˜ ì´ë ¥) + Redis(ì‹¤ì‹œê°„ ì”ê³ )
5. **Polymorphic íŒ¨í„´**: íƒœê·¸, ì•Œë¦¼, í™œë™ ì‹œìŠ¤í…œì˜ ìœ ì—°í•œ í™•ì¥

### ì£¼ìš” í…Œì´ë¸” ê´€ê³„

```
users (ì‚¬ìš©ì)
  â†“ 1:N
accounts (ê³„ì¢Œ) â† account_shares (ê³µìœ )
  â†“ 1:N
assets (ìì‚°) â† tags, reminders, activities
  â†“ 1:N
transactions (ê±°ë˜) â† categories
```

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

- **Database**: PostgreSQL 15+
- **Cache**: Redis 7+
- **Backend**: Python 3.11+, FastAPI
- **ORM**: SQLAlchemy
- **Migration**: Alembic

## ğŸ“Œ ì£¼ì˜ì‚¬í•­

### ì™¸ë˜í‚¤ ê·œì¹™
- `CASCADE`: ë¶€ëª¨ ì‚­ì œ ì‹œ ìì‹ë„ ì‚­ì œ (users â†’ accounts â†’ assets â†’ transactions)
- `SET NULL`: ì„ íƒì  ì°¸ì¡° (category_id, related_transaction_id)

### Polymorphic í…Œì´ë¸”
- `tags/taggables`: ìì‚°/ê³„ì¢Œ/ê±°ë˜ì— íƒœê·¸ ë¶€ì°©
- `reminders`: ìì‚°/ê³„ì¢Œ/ê±°ë˜ì— ì•Œë¦¼ ì„¤ì •
- `activities`: ìì‚°/ê³„ì¢Œ/ê±°ë˜ì— ëŒ“ê¸€/ë¡œê·¸ ê¸°ë¡

## ğŸ“® ë¬¸ì„œ ì—…ë°ì´íŠ¸

ë¬¸ì„œë¥¼ ìˆ˜ì •í•  ë•ŒëŠ” ë‹¤ìŒ ì‚¬í•­ì„ ì¤€ìˆ˜í•´ì£¼ì„¸ìš”:

1. **ì¼ê´€ì„± ìœ ì§€**: í…Œì´ë¸” ì´ë¦„, í•„ë“œ ì´ë¦„ì„ ì •í™•í•˜ê²Œ ì‚¬ìš©
2. **ì˜ˆì‹œ í¬í•¨**: ì‹¤ì œ ì‚¬ìš© ê°€ëŠ¥í•œ SQL ì¿¼ë¦¬ë‚˜ API í˜¸ì¶œ ì˜ˆì‹œ ì œê³µ
3. **ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ëª…ì‹œ**: ì™œ ê·¸ë ‡ê²Œ ì„¤ê³„í–ˆëŠ”ì§€ ì„¤ëª…
4. **ì¸ë±ìŠ¤ ìµœì í™”**: ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­ ë¬¸ì„œí™”

---

**Last Updated**: 2025-11-12
